<div class="trip-day">
    <h3>
        Day @ViewBag.DayNumber</h3>
    @foreach (Activity activity in ViewBag.Activities)
    {
        if (activity is TransportationActivity)
        {
            var transportationActivity = activity as TransportationActivity;
        <div class="activity transportation" data-activity-id="@activity.Id" title="Click for details">
            <h4>
                @transportationActivity.TransportationType.Name from <a href="@Url.Details(transportationActivity.FromCity)">@transportationActivity.FromCity.ASCIIName</a> to <a href="@Url.Details(transportationActivity.ToCity)">@transportationActivity.ToCity.ASCIIName</a>
            </h4>
        </div>
        }
        else if (activity is HotelActivity)
        {
            var hotelActivity = activity as HotelActivity;
        <div class="activity hotel" data-activity-id="@activity.Id" title="Click for details">
            @if (ViewBag.DayNumber == hotelActivity.BeginDay)
            {
                <img src="@hotelActivity.Hotel.Photo.ThumbURL" alt="" />
            }
            <h4>
                @if (ViewBag.DayNumber == hotelActivity.BeginDay)
                {
                    <p>
                        Check in to <a href="@Url.Details(hotelActivity.Hotel)">@hotelActivity.Hotel.Name</a> for a @(hotelActivity.EndDay - hotelActivity.BeginDay)
                        night stay
                    </p>
                }
                else
                {
                    <p>
                        Check out of <a href="@Url.Details(hotelActivity.Hotel)">@hotelActivity.Hotel.Name</a>
                    </p>
                }
            </h4>
        </div>
        }
        else if (activity is WebsiteActivity)
        {
            var websiteActivity = activity as WebsiteActivity;
        <div class="activity website" data-activity-id="@activity.Id" title="Click to visit">
            <h4>
                <a rel="nofollow" target="_blank" href="@websiteActivity.URL">@websiteActivity.Title</a> (link)
            </h4>
        </div>
        }
        else if (activity is TagActivity)
        {
            var tagActivity = activity as TagActivity;
        <div class="activity destination-tag" data-activity-id="@activity.Id" title="Click for details">
            <h4>
                <a href="@Url.Tag(tagActivity.City, tagActivity.Tag)">@tagActivity.Tag.Name in @tagActivity.City.ASCIIName</a>
            </h4>
        </div>
        }
        else if (activity is PlaceActivity)
        {
            var placeActivity = activity as PlaceActivity;
        <div class="activity place" data-activity-id="@activity.Id" title="Click for details">
            <h4>
                @placeActivity.Place.Name [@placeActivity.Place.FactualId]
            </h4>
        </div>
        }
    }
</div>
